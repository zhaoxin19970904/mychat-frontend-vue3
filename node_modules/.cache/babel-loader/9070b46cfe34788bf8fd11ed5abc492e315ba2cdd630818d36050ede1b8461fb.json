{"ast":null,"code":"import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-53885be6\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  key: 0\n};\nconst _hoisted_2 = {\n  key: 1\n};\nexport function render(_ctx, _cache) {\n  const _component_a_button = _resolveComponent(\"a-button\");\n  const _component_a_table = _resolveComponent(\"a-table\");\n  return _openBlock(), _createBlock(_component_a_table, {\n    columns: _ctx.columns,\n    \"data-source\": _ctx.dataSource,\n    bordered: \"\"\n  }, {\n    bodyCell: _withCtx(({\n      record,\n      column\n    }) => [column.dataIndex === 'action' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_a_button, {\n      type: \"primary\",\n      onClick: $event => _ctx.edit(record.key)\n    }, {\n      default: _withCtx(() => [_createTextVNode(\"Edit\")]),\n      _: 2 /* DYNAMIC */\n    }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"]), _createVNode(_component_a_button, {\n      type: \"danger\",\n      onClick: $event => _ctx.deleteRecord(record.key)\n    }, {\n      default: _withCtx(() => [_createTextVNode(\"Delete\")]),\n      _: 2 /* DYNAMIC */\n    }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"])])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_2, _toDisplayString(record[column.dataIndex]), 1 /* TEXT */))]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"columns\", \"data-source\"]);\n}","map":{"version":3,"names":["key","_createBlock","_component_a_table","columns","_ctx","dataSource","bordered","bodyCell","_withCtx","record","column","dataIndex","_createElementBlock","_hoisted_1","_createVNode","_component_a_button","type","onClick","$event","edit","default","_createTextVNode","_","deleteRecord","_hoisted_2","_toDisplayString"],"sources":["C:\\Users\\bobxi\\OneDrive\\Desktop\\Ecloud\\tut8\\my-vue-app\\src\\components\\AdminList.vue"],"sourcesContent":["<template>\r\n    <a-table :columns=\"columns\" :data-source=\"dataSource\" bordered>\r\n    <template #bodyCell=\"{ record, column }\">\r\n      <div v-if=\"column.dataIndex === 'action'\">\r\n        <a-button type=\"primary\" @click=\"edit(record.key)\">Edit</a-button>\r\n        <a-button type=\"danger\" @click=\"deleteRecord(record.key)\">Delete</a-button>\r\n      </div>\r\n      <div v-else>{{ record[column.dataIndex] }}</div>\r\n    </template>\r\n  </a-table>\r\n  </template>\r\n  <script setup>\r\n  import { cloneDeep } from 'lodash-es';\r\n  import { reactive, ref } from 'vue';\r\n  import { useRouter } from 'vue-router';\r\n\r\nconst router = useRouter();\r\n\r\nconst edit = (key) => {\r\n  // 假设有一个专门的编辑页面，其路由路径为 '/edit/:key'\r\n  // 其中 ':key' 是要编辑的记录的键\r\n  router.push(`/edit/${key}`);\r\n};\r\n\r\nconst deleteRecord = async (key) => {\r\n  try {\r\n    await fetch(`http://localhost:3001/delete/${key}`, {\r\n      method: 'DELETE',\r\n      // 如果需要，这里可以添加 headers，例如认证令牌\r\n    });\r\n    // 请求成功后，可以从 dataSource 中移除该记录，或重新获取数据列表\r\n    // dataSource.value = dataSource.value.filter(item => item.key !== key);\r\n    console.log('Record deleted successfully');\r\n  } catch (error) {\r\n    console.error('Failed to delete the record:', error);\r\n  }\r\n};\r\n\r\n  const columns = [\r\n    {\r\n      title: 'Name',\r\n      dataIndex: 'name',\r\n      width: '8%',\r\n    },\r\n    {\r\n      title: 'Age',\r\n      dataIndex: 'age',\r\n      width: '5%',\r\n    },\r\n    {\r\n      title: 'Gender',\r\n      dataIndex: 'gender',\r\n      width: '6%',\r\n    },\r\n    {\r\n      title: 'Type',\r\n      dataIndex: 'type',\r\n      width: '6%',\r\n    },\r\n    {\r\n      title: 'Birth',\r\n      dataIndex: 'birth',\r\n      width: '20%',\r\n    },\r\n    {\r\n      title: 'Email',\r\n      dataIndex: 'Email',\r\n      width: '20%',\r\n    },\r\n    {\r\n      title: 'Edit',\r\n      dataIndex: 'Edit',\r\n      width: '10%',\r\n    },\r\n    {\r\n      title: 'Delete',\r\n      dataIndex: 'delete',\r\n      width: '10%',\r\n    },\r\n  ];\r\n  const data = [];\r\n  for (let i = 0; i < 100; i++) {\r\n    data.push({\r\n      key: i.toString(),\r\n      name: `Edrward ${i}`,\r\n      age: 32,\r\n      address: `London Park no. ${i}`,\r\n    });\r\n  }\r\n  const dataSource = ref(data);\r\n  const editableData = reactive({});\r\n  const edit = key => {\r\n    editableData[key] = cloneDeep(dataSource.value.filter(item => key === item.key)[0]);\r\n  };\r\n  const save = key => {\r\n    Object.assign(dataSource.value.filter(item => key === item.key)[0], editableData[key]);\r\n    delete editableData[key];\r\n  };\r\n  const cancel = key => {\r\n    delete editableData[key];\r\n  };\r\n  </script>\r\n  <style scoped>\r\n  .editable-row-operations a {\r\n    margin-right: 8px;\r\n  }\r\n  </style>"],"mappings":";;;EAAAA,GAAA;AAAA;;EAAAA,GAAA;AAAA;;;;uBACIC,YAAA,CAQQC,kBAAA;IAREC,OAAO,EAAEC,IAAA,CAAAD,OAAO;IAAG,aAAW,EAAEC,IAAA,CAAAC,UAAU;IAAEC,QAAQ,EAAR;;IAC3CC,QAAQ,EAAAC,QAAA,CACjB,CAGM;MAJeC,MAAM;MAAEC;IAAM,OACxBA,MAAM,CAACC,SAAS,iB,cAA3BC,mBAAA,CAGM,OANZC,UAAA,GAIQC,YAAA,CAAkEC,mBAAA;MAAxDC,IAAI,EAAC,SAAS;MAAEC,OAAK,EAAAC,MAAA,IAAEd,IAAA,CAAAe,IAAI,CAACV,MAAM,CAACT,GAAG;;MAJxDoB,OAAA,EAAAZ,QAAA,CAI2D,MAAI,CAJ/Da,gBAAA,CAI2D,MAAI,E;MAJ/DC,CAAA;sDAKQR,YAAA,CAA2EC,mBAAA;MAAjEC,IAAI,EAAC,QAAQ;MAAEC,OAAK,EAAAC,MAAA,IAAEd,IAAA,CAAAmB,YAAY,CAACd,MAAM,CAACT,GAAG;;MAL/DoB,OAAA,EAAAZ,QAAA,CAKkE,MAAM,CALxEa,gBAAA,CAKkE,QAAM,E;MALxEC,CAAA;yEAOMV,mBAAA,CAAgD,OAPtDY,UAAA,EAAAC,gBAAA,CAOqBhB,MAAM,CAACC,MAAM,CAACC,SAAS,mB;IAP5CW,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}