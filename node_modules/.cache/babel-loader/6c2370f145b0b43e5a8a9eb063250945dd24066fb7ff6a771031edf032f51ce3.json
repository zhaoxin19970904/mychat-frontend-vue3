{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref } from 'vue';\nimport { useRouter } from 'vue-router';\nexport default {\n  __name: 'AdminList',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const edit = key => {\n      // 假设有一个专门的编辑页面，其路由路径为 '/edit/:key'\n      // 其中 ':key' 是要编辑的记录的键\n      router.push(`/edit/${key}`);\n    };\n    const deleteRecord = async key => {\n      try {\n        await fetch(`http://localhost:3001/delete/${key}`, {\n          method: 'DELETE'\n          // 如果需要，这里可以添加 headers，例如认证令牌\n        });\n        // 请求成功后，可以从 dataSource 中移除该记录，或重新获取数据列表\n        // dataSource.value = dataSource.value.filter(item => item.key !== key);\n        console.log('Record deleted successfully');\n      } catch (error) {\n        console.error('Failed to delete the record:', error);\n      }\n    };\n    const columns = [{\n      title: 'Name',\n      dataIndex: 'name',\n      width: '8%'\n    }, {\n      title: 'Age',\n      dataIndex: 'age',\n      width: '5%'\n    }, {\n      title: 'Gender',\n      dataIndex: 'gender',\n      width: '6%'\n    }, {\n      title: 'Type',\n      dataIndex: 'type',\n      width: '6%'\n    }, {\n      title: 'Birth',\n      dataIndex: 'birth',\n      width: '20%'\n    }, {\n      title: 'Email',\n      dataIndex: 'Email',\n      width: '20%'\n    }, {\n      title: 'Edit',\n      dataIndex: 'Edit',\n      width: '10%'\n    }, {\n      title: 'Delete',\n      dataIndex: 'delete',\n      width: '10%'\n    }];\n    const data = [];\n    for (let i = 0; i < 100; i++) {\n      data.push({\n        key: i.toString(),\n        name: `Edrward ${i}`,\n        age: 32,\n        address: `London Park no. ${i}`\n      });\n    }\n    const dataSource = ref(data);\n    const __returned__ = {\n      router,\n      edit,\n      deleteRecord,\n      columns,\n      data,\n      dataSource,\n      ref,\n      get useRouter() {\n        return useRouter;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","useRouter","router","edit","key","push","deleteRecord","fetch","method","console","log","error","columns","title","dataIndex","width","data","i","toString","name","age","address","dataSource"],"sources":["C:/Users/bobxi/OneDrive/Desktop/Ecloud/tut8/my-vue-app/src/components/AdminList.vue"],"sourcesContent":["<template>\r\n    <a-table :columns=\"columns\" :data-source=\"dataSource\" bordered>\r\n    <template #bodyCell=\"{ record, column }\">\r\n      <div v-if=\"column.dataIndex === 'action'\">\r\n        <a-button type=\"primary\" @click=\"edit(record.key)\">Edit</a-button>\r\n        <a-button type=\"danger\" @click=\"deleteRecord(record.key)\">Delete</a-button>\r\n      </div>\r\n      <div v-else>{{ record[column.dataIndex] }}</div>\r\n    </template>\r\n  </a-table>\r\n  </template>\r\n  <script setup>\r\n\r\n  import {  ref } from 'vue';\r\n  import { useRouter } from 'vue-router';\r\n\r\nconst router = useRouter();\r\n\r\nconst edit = (key) => {\r\n  // 假设有一个专门的编辑页面，其路由路径为 '/edit/:key'\r\n  // 其中 ':key' 是要编辑的记录的键\r\n  router.push(`/edit/${key}`);\r\n};\r\n\r\nconst deleteRecord = async (key) => {\r\n  try {\r\n    await fetch(`http://localhost:3001/delete/${key}`, {\r\n      method: 'DELETE',\r\n      // 如果需要，这里可以添加 headers，例如认证令牌\r\n    });\r\n    // 请求成功后，可以从 dataSource 中移除该记录，或重新获取数据列表\r\n    // dataSource.value = dataSource.value.filter(item => item.key !== key);\r\n    console.log('Record deleted successfully');\r\n  } catch (error) {\r\n    console.error('Failed to delete the record:', error);\r\n  }\r\n};\r\n\r\n  const columns = [\r\n    {\r\n      title: 'Name',\r\n      dataIndex: 'name',\r\n      width: '8%',\r\n    },\r\n    {\r\n      title: 'Age',\r\n      dataIndex: 'age',\r\n      width: '5%',\r\n    },\r\n    {\r\n      title: 'Gender',\r\n      dataIndex: 'gender',\r\n      width: '6%',\r\n    },\r\n    {\r\n      title: 'Type',\r\n      dataIndex: 'type',\r\n      width: '6%',\r\n    },\r\n    {\r\n      title: 'Birth',\r\n      dataIndex: 'birth',\r\n      width: '20%',\r\n    },\r\n    {\r\n      title: 'Email',\r\n      dataIndex: 'Email',\r\n      width: '20%',\r\n    },\r\n    {\r\n      title: 'Edit',\r\n      dataIndex: 'Edit',\r\n      width: '10%',\r\n    },\r\n    {\r\n      title: 'Delete',\r\n      dataIndex: 'delete',\r\n      width: '10%',\r\n    },\r\n  ];\r\n  const data = [];\r\n  for (let i = 0; i < 100; i++) {\r\n    data.push({\r\n      key: i.toString(),\r\n      name: `Edrward ${i}`,\r\n      age: 32,\r\n      address: `London Park no. ${i}`,\r\n    });\r\n  }\r\n  const dataSource = ref(data);\r\n  \r\n </script>"],"mappings":";AAaE,SAAUA,GAAG,QAAQ,KAAK;AAC1B,SAASC,SAAS,QAAQ,YAAY;;;;;;;IAExC,MAAMC,MAAM,GAAGD,SAAS,CAAC,CAAC;IAE1B,MAAME,IAAI,GAAIC,GAAG,IAAK;MACpB;MACA;MACAF,MAAM,CAACG,IAAI,CAAE,SAAQD,GAAI,EAAC,CAAC;IAC7B,CAAC;IAED,MAAME,YAAY,GAAG,MAAOF,GAAG,IAAK;MAClC,IAAI;QACF,MAAMG,KAAK,CAAE,gCAA+BH,GAAI,EAAC,EAAE;UACjDI,MAAM,EAAE;UACR;QACF,CAAC,CAAC;QACF;QACA;QACAC,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC;MAC5C,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdF,OAAO,CAACE,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;MACtD;IACF,CAAC;IAEC,MAAMC,OAAO,GAAG,CACd;MACEC,KAAK,EAAE,MAAM;MACbC,SAAS,EAAE,MAAM;MACjBC,KAAK,EAAE;IACT,CAAC,EACD;MACEF,KAAK,EAAE,KAAK;MACZC,SAAS,EAAE,KAAK;MAChBC,KAAK,EAAE;IACT,CAAC,EACD;MACEF,KAAK,EAAE,QAAQ;MACfC,SAAS,EAAE,QAAQ;MACnBC,KAAK,EAAE;IACT,CAAC,EACD;MACEF,KAAK,EAAE,MAAM;MACbC,SAAS,EAAE,MAAM;MACjBC,KAAK,EAAE;IACT,CAAC,EACD;MACEF,KAAK,EAAE,OAAO;MACdC,SAAS,EAAE,OAAO;MAClBC,KAAK,EAAE;IACT,CAAC,EACD;MACEF,KAAK,EAAE,OAAO;MACdC,SAAS,EAAE,OAAO;MAClBC,KAAK,EAAE;IACT,CAAC,EACD;MACEF,KAAK,EAAE,MAAM;MACbC,SAAS,EAAE,MAAM;MACjBC,KAAK,EAAE;IACT,CAAC,EACD;MACEF,KAAK,EAAE,QAAQ;MACfC,SAAS,EAAE,QAAQ;MACnBC,KAAK,EAAE;IACT,CAAC,CACF;IACD,MAAMC,IAAI,GAAG,EAAE;IACf,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,GAAG,EAAEA,CAAC,EAAE,EAAE;MAC5BD,IAAI,CAACX,IAAI,CAAC;QACRD,GAAG,EAAEa,CAAC,CAACC,QAAQ,CAAC,CAAC;QACjBC,IAAI,EAAG,WAAUF,CAAE,EAAC;QACpBG,GAAG,EAAE,EAAE;QACPC,OAAO,EAAG,mBAAkBJ,CAAE;MAChC,CAAC,CAAC;IACJ;IACA,MAAMK,UAAU,GAAGtB,GAAG,CAACgB,IAAI,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}