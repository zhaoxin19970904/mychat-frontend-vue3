{"ast":null,"code":"import { reactive, readonly } from \"vue\";\nlet Vue3GoogleOauth;\nVue3GoogleOauth = reactive({\n  isInit: false,\n  isAuthorized: false\n});\nconst googleAuth = function () {\n  function installClient() {\n    const apiUrl = 'https://apis.google.com/js/api.js';\n    return new Promise(resolve => {\n      let script = document.createElement('script');\n      script.src = apiUrl;\n      script.onreadystatechange = script.onload = function () {\n        if (!script.readyState || /loaded|complete/.test(script.readyState)) {\n          setTimeout(function () {\n            resolve();\n          }, 500);\n        }\n      };\n      document.getElementsByTagName('head')[0].appendChild(script);\n    });\n  }\n  function initClient(config) {\n    return new Promise((resolve, reject) => {\n      window.gapi.load('auth2', () => {\n        window.gapi.auth2.init(config).then(() => {\n          resolve(window.gapi);\n        }).catch(error => {\n          reject(error);\n        });\n      });\n    });\n  }\n  function Auth() {\n    if (!(this instanceof Auth)) return new Auth();\n    this.instance = null; /* window.gapi.auth2.getAuthInstance() */\n    this.load = config => {\n      installClient().then(() => {\n        return initClient(config);\n      }).then(gapi => {\n        this.instance = gapi.auth2.getAuthInstance();\n        this.prompt = config.prompt;\n        Vue3GoogleOauth.instance = gapi.auth2.getAuthInstance();\n        Vue3GoogleOauth.isInit = true;\n        Vue3GoogleOauth.isAuthorized = this.instance.isSignedIn.get();\n      }).catch(error => {\n        console.error(error);\n      });\n    };\n    this.signIn = () => {\n      return new Promise((resolve, reject) => {\n        if (!this.instance) {\n          reject(false);\n          return;\n        }\n        this.instance.signIn().then(googleUser => {\n          Vue3GoogleOauth.isAuthorized = this.instance.isSignedIn.get();\n          resolve(googleUser);\n        }).catch(error => {\n          reject(error);\n        });\n      });\n    };\n    this.getAuthCode = () => {\n      return new Promise((resolve, reject) => {\n        if (!this.instance) {\n          reject(false);\n          return;\n        }\n        this.instance.grantOfflineAccess({\n          prompt: this.prompt\n        }).then(function (resp) {\n          resolve(resp.code);\n        }).catch(function (error) {\n          reject(error);\n        });\n      });\n    };\n    this.signOut = () => {\n      return new Promise((resolve, reject) => {\n        if (!this.instance) {\n          reject(false);\n          return;\n        }\n        this.instance.signOut().then(() => {\n          Vue3GoogleOauth.isAuthorized = false;\n          resolve(true);\n        }).catch(error => {\n          reject(error);\n        });\n      });\n    };\n  }\n  return new Auth();\n}();\nexport default {\n  install: (app, options) => {\n    /* eslint-disable */\n    //set config\n    let config = null;\n    let defaultConfig = {\n      scope: 'profile email',\n      prompt: 'select_account'\n    };\n    if (typeof options === 'object') {\n      config = Object.assign(defaultConfig, options);\n      if (!options.clientId) {\n        throw new Error('clientId is required');\n      }\n    } else {\n      throw new TypeError('invalid option type. Object type accepted only');\n    }\n\n    //Install Vue plugin\n    googleAuth.load(config);\n    app.config.globalProperties.$gAuth = googleAuth;\n    app.provide('Vue3GoogleOauth', readonly(Vue3GoogleOauth));\n  }\n};","map":{"version":3,"names":["reactive","readonly","Vue3GoogleOauth","isInit","isAuthorized","googleAuth","installClient","apiUrl","Promise","resolve","script","document","createElement","src","onreadystatechange","onload","readyState","test","setTimeout","getElementsByTagName","appendChild","initClient","config","reject","window","gapi","load","auth2","init","then","catch","error","Auth","instance","getAuthInstance","prompt","isSignedIn","get","console","signIn","googleUser","getAuthCode","grantOfflineAccess","resp","code","signOut","install","app","options","defaultConfig","scope","Object","assign","clientId","Error","TypeError","globalProperties","$gAuth","provide"],"sources":["C:/Users/bobxi/OneDrive/Desktop/Ecloud/tut8/my-vue-app/node_modules/vue3-google-oauth2/index.js"],"sourcesContent":["import { reactive, readonly } from \"vue\";\nlet Vue3GoogleOauth;\nVue3GoogleOauth = reactive({\n  isInit: false,\n  isAuthorized: false,\n})\nconst googleAuth = (function () {\n\n  function installClient() {\n    const apiUrl = 'https://apis.google.com/js/api.js';\n    return new Promise((resolve) => {\n      let script = document.createElement('script');\n      script.src = apiUrl;\n      script.onreadystatechange = script.onload = function () {\n        if (!script.readyState || /loaded|complete/.test(script.readyState)) {\n          setTimeout(function () {\n            resolve()\n          }, 500)\n        }\n      }\n      document.getElementsByTagName('head')[0].appendChild(script);\n    })\n  }\n\n  function initClient(config) {\n    return new Promise((resolve, reject) => {\n      window.gapi.load('auth2', () => {\n        window.gapi.auth2.init(config)\n          .then(() => {\n            resolve(window.gapi);\n          }).catch((error) => {\n            reject(error);\n          })\n      })\n    })\n\n  }\n\n  function Auth() {\n    if (!(this instanceof Auth))\n      return new Auth();\n    this.instance = null; /* window.gapi.auth2.getAuthInstance() */\n    this.load = (config) => {\n      installClient()\n        .then(() => {\n          return initClient(config)\n        })\n        .then((gapi) => {\n          this.instance = gapi.auth2.getAuthInstance();\n\n          this.prompt = config.prompt;\n          Vue3GoogleOauth.instance = gapi.auth2.getAuthInstance();\n          Vue3GoogleOauth.isInit = true;\n          Vue3GoogleOauth.isAuthorized = this.instance.isSignedIn.get();\n        }).catch((error) => {\n          console.error(error);\n        })\n    };\n\n    this.signIn = () => {\n      return new Promise((resolve, reject) => {\n        if (!this.instance) {\n          reject(false)\n          return\n        }\n        this.instance.signIn()\n          .then(googleUser => {\n            Vue3GoogleOauth.isAuthorized = this.instance.isSignedIn.get();\n            resolve(googleUser);\n          })\n          .catch(error => {\n            reject(error);\n          })\n      })\n    };\n\n    this.getAuthCode = () => {\n      return new Promise((resolve, reject) => {\n        if (!this.instance) {\n          reject(false)\n          return\n        }\n        this.instance.grantOfflineAccess({ prompt: this.prompt })\n          .then(function (resp) {\n            resolve(resp.code)\n          })\n          .catch(function (error) {\n            reject(error)\n          })\n      })\n    };\n\n    this.signOut = () => {\n      return new Promise((resolve, reject) => {\n        if (!this.instance) {\n          reject(false)\n          return\n        }\n        this.instance.signOut()\n          .then(() => {\n            Vue3GoogleOauth.isAuthorized = false;\n            resolve(true)\n          })\n          .catch(error => {\n            reject(error)\n          })\n      })\n    };\n  }\n\n  return new Auth()\n})();\n\nexport default {\n  install: (app, options) => {\n    /* eslint-disable */\n    //set config\n    let config = null\n    let defaultConfig = { scope: 'profile email', prompt: 'select_account' };\n    if (typeof options === 'object') {\n      config = Object.assign(defaultConfig, options);\n      if (!options.clientId) {\n        throw new Error('clientId is required');\n      }\n    } else {\n      throw new TypeError('invalid option type. Object type accepted only');\n    }\n\n    //Install Vue plugin\n    googleAuth.load(config);\n    app.config.globalProperties.$gAuth = googleAuth;\n    app.provide('Vue3GoogleOauth', readonly(Vue3GoogleOauth));\n\n  }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}