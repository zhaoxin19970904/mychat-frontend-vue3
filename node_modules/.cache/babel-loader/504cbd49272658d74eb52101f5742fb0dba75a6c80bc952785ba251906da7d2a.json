{"ast":null,"code":"import { computed } from 'vue';\nimport { usePagination } from 'vue-request';\nimport axios from 'axios';\nexport default {\n  __name: 'AdminList',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const columns = [{\n      title: 'Name',\n      dataIndex: 'name',\n      sorter: true,\n      width: '20%'\n    }, {\n      title: 'Gender',\n      dataIndex: 'gender',\n      filters: [{\n        text: 'Male',\n        value: 'male'\n      }, {\n        text: 'Female',\n        value: 'female'\n      }],\n      width: '20%'\n    }, {\n      title: 'Email',\n      dataIndex: 'email'\n    }];\n    const queryData = params => {\n      return axios.get('https://randomuser.me/api?noinfo', {\n        params\n      });\n    };\n    const {\n      data: dataSource,\n      run,\n      loading,\n      current,\n      pageSize\n    } = usePagination(queryData, {\n      formatResult: res => res.data.results,\n      pagination: {\n        currentKey: 'page',\n        pageSizeKey: 'results'\n      }\n    });\n    const pagination = computed(() => ({\n      total: 200,\n      // 这里应该是后端返回的总条目数\n      current: current.value,\n      pageSize: pageSize.value\n    }));\n    const handleTableChange = (pag, filters, sorter) => {\n      run({\n        results: pag.pageSize,\n        page: pag?.current,\n        sortField: sorter.field,\n        sortOrder: sorter.order,\n        ...filters\n      });\n    };\n    const __returned__ = {\n      columns,\n      queryData,\n      dataSource,\n      run,\n      loading,\n      current,\n      pageSize,\n      pagination,\n      handleTableChange,\n      computed,\n      get usePagination() {\n        return usePagination;\n      },\n      get axios() {\n        return axios;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["computed","usePagination","axios","columns","title","dataIndex","sorter","width","filters","text","value","queryData","params","get","data","dataSource","run","loading","current","pageSize","formatResult","res","results","pagination","currentKey","pageSizeKey","total","handleTableChange","pag","page","sortField","field","sortOrder","order"],"sources":["C:/Users/bobxi/OneDrive/Desktop/Ecloud/tut8/my-vue-app/src/components/AdminList.vue"],"sourcesContent":["<template>\r\n    <a-table\r\n      :columns=\"columns\"\r\n      :row-key=\"record => record.login.uuid\"\r\n      :data-source=\"dataSource\"\r\n      :pagination=\"pagination\"\r\n      :loading=\"loading\"\r\n      @change=\"handleTableChange\"\r\n    >\r\n      <template #bodyCell=\"{ column, text }\">\r\n        <template v-if=\"column.dataIndex === 'name'\">{{ text.first }} {{ text.last }}</template>\r\n      </template>\r\n    </a-table>\r\n  </template>\r\n  \r\n  <script setup>\r\n  import { computed } from 'vue';\r\n  import { usePagination } from 'vue-request';\r\n  import axios from 'axios';\r\n  \r\n  const columns = [\r\n    {\r\n      title: 'Name',\r\n      dataIndex: 'name',\r\n      sorter: true,\r\n      width: '20%',\r\n    },\r\n    {\r\n      title: 'Gender',\r\n      dataIndex: 'gender',\r\n      filters: [\r\n        { text: 'Male', value: 'male' },\r\n        { text: 'Female', value: 'female' },\r\n      ],\r\n      width: '20%',\r\n    },\r\n    {\r\n      title: 'Email',\r\n      dataIndex: 'email',\r\n    },\r\n  ];\r\n  \r\n  const queryData = (params) => {\r\n    return axios.get('https://randomuser.me/api?noinfo', {\r\n      params,\r\n    });\r\n  };\r\n  \r\n  const {\r\n    data: dataSource,\r\n    run,\r\n    loading,\r\n    current,\r\n    pageSize,\r\n  } = usePagination(queryData, {\r\n    formatResult: (res) => res.data.results,\r\n    pagination: {\r\n      currentKey: 'page',\r\n      pageSizeKey: 'results',\r\n    },\r\n  });\r\n  \r\n  const pagination = computed(() => ({\r\n    total: 200, // 这里应该是后端返回的总条目数\r\n    current: current.value,\r\n    pageSize: pageSize.value,\r\n  }));\r\n  \r\n  const handleTableChange = (pag, filters, sorter) => {\r\n    run({\r\n      results: pag.pageSize,\r\n      page: pag?.current,\r\n      sortField: sorter.field,\r\n      sortOrder: sorter.order,\r\n      ...filters,\r\n    });\r\n  };\r\n  </script>"],"mappings":"AAgBE,SAASA,QAAQ,QAAQ,KAAK;AAC9B,SAASC,aAAa,QAAQ,aAAa;AAC3C,OAAOC,KAAK,MAAM,OAAO;;;;;;;IAEzB,MAAMC,OAAO,GAAG,CACd;MACEC,KAAK,EAAE,MAAM;MACbC,SAAS,EAAE,MAAM;MACjBC,MAAM,EAAE,IAAI;MACZC,KAAK,EAAE;IACT,CAAC,EACD;MACEH,KAAK,EAAE,QAAQ;MACfC,SAAS,EAAE,QAAQ;MACnBG,OAAO,EAAE,CACP;QAAEC,IAAI,EAAE,MAAM;QAAEC,KAAK,EAAE;MAAO,CAAC,EAC/B;QAAED,IAAI,EAAE,QAAQ;QAAEC,KAAK,EAAE;MAAS,CAAC,CACpC;MACDH,KAAK,EAAE;IACT,CAAC,EACD;MACEH,KAAK,EAAE,OAAO;MACdC,SAAS,EAAE;IACb,CAAC,CACF;IAED,MAAMM,SAAS,GAAIC,MAAM,IAAK;MAC5B,OAAOV,KAAK,CAACW,GAAG,CAAC,kCAAkC,EAAE;QACnDD;MACF,CAAC,CAAC;IACJ,CAAC;IAED,MAAM;MACJE,IAAI,EAAEC,UAAU;MAChBC,GAAG;MACHC,OAAO;MACPC,OAAO;MACPC;IACF,CAAC,GAAGlB,aAAa,CAACU,SAAS,EAAE;MAC3BS,YAAY,EAAGC,GAAG,IAAKA,GAAG,CAACP,IAAI,CAACQ,OAAO;MACvCC,UAAU,EAAE;QACVC,UAAU,EAAE,MAAM;QAClBC,WAAW,EAAE;MACf;IACF,CAAC,CAAC;IAEF,MAAMF,UAAU,GAAGvB,QAAQ,CAAC,OAAO;MACjC0B,KAAK,EAAE,GAAG;MAAE;MACZR,OAAO,EAAEA,OAAO,CAACR,KAAK;MACtBS,QAAQ,EAAEA,QAAQ,CAACT;IACrB,CAAC,CAAC,CAAC;IAEH,MAAMiB,iBAAiB,GAAGA,CAACC,GAAG,EAAEpB,OAAO,EAAEF,MAAM,KAAK;MAClDU,GAAG,CAAC;QACFM,OAAO,EAAEM,GAAG,CAACT,QAAQ;QACrBU,IAAI,EAAED,GAAG,EAAEV,OAAO;QAClBY,SAAS,EAAExB,MAAM,CAACyB,KAAK;QACvBC,SAAS,EAAE1B,MAAM,CAAC2B,KAAK;QACvB,GAAGzB;MACL,CAAC,CAAC;IACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}